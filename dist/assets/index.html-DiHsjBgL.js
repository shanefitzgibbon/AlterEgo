import{S as a}from"./storage-CbI5T85I.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const t of n.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&c(t)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}})();document.addEventListener("DOMContentLoaded",async()=>{const l=document.getElementById("persona-list"),s=document.getElementById("create-persona-btn"),i=document.getElementById("new-persona-name"),c=document.getElementById("current-persona-name");await e(),s.addEventListener("click",async()=>{const t=i.value.trim();if(t){const r=await a.getPersonas(),d={id:crypto.randomUUID(),name:t,created:Date.now()};r.push(d),await a.savePersonas(r),i.value="",await e()}});async function e(){const t=await a.getPersonas(),r=await a.getActivePersonaId(),d=t.find(o=>o.id===r);c.textContent=d?d.name:"Default / None",l.innerHTML="",t.forEach(o=>{const u=document.createElement("div");u.className=`p-3 rounded border cursor-pointer flex justify-between items-center ${o.id===r?"bg-blue-100 border-blue-300":"bg-white hover:bg-gray-50"}`,u.innerHTML=`
                <span class="font-medium">${o.name}</span>
                ${o.id===r?'<span class="text-blue-600 text-sm font-bold">Active</span>':""}
            `,u.addEventListener("click",()=>n(o.id)),l.appendChild(u)})}async function n(t){await a.setActivePersonaId(t),await e()}chrome.storage.onChanged.addListener((t,r)=>{r==="local"&&(t.personas||t.activePersonaId)&&e()})});
